# postgresql-13.1-ml
Integration of CardEst Methods into PostgreSQL by HTTP Server


## Compare with PG CE methods
### Single Tabel
- test database: imdb.title
- Plan with PG CE methods:

```SQL
imdb=# explain analyze select * from title where kind_id>1 and kind_id<10;
                                                              QUERY PLAN
--------------------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on title  (cost=174.01..25746.20 rows=12642 width=306) (actual time=163.325..646.420 rows=1865487 loops=1)
   Recheck Cond: ((kind_id > 1) AND (kind_id < 10))
   Heap Blocks: exact=35995
   ->  Bitmap Index Scan on kind_id_title  (cost=0.00..170.85 rows=12642 width=0) (actual time=156.207..156.208 rows=1865487 loops=1)
         Index Cond: ((kind_id > 1) AND (kind_id < 10))
 Planning Time: 1.313 ms
 Execution Time: 710.562 ms
(7 rows)
```

- Plan with learned CE methods:

```SQL
imdb=# explain analyze select * from title where kind_id>1 and kind_id<10;
                                                    QUERY PLAN
------------------------------------------------------------------------------------------------------------------
 Seq Scan on title  (cost=0.00..73920.58 rows=1242940 width=94) (actual time=0.037..586.408 rows=1865487 loops=1)
   Filter: ((kind_id > 1) AND (kind_id < 10))
   Rows Removed by Filter: 662825
 Planning Time: 32.463 ms
 Execution Time: 656.291 ms
(5 rows)
```

